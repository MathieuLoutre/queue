(function(){function n(n){function l(){for(;r=c.length>a&&n>p;){var l=a++,o=u,f=c[l],i=t.call(f,1);"function"==typeof i[i.length-1]&&(o=i.pop()),i.push(e(l,o)),++p,f[0].apply(null,i)}}function e(n,u){return function(t,e){--p,null==d&&(null!=t?(d=t,a=s=0/0,o()):(u(e,a,s-1),c[n]=e,--s?r||l():o()))}}function o(){null!=d?h(d):f?h(d,c):h.apply(null,[d].concat(c))}var r,f,i={},c=[],a=0,p=0,s=0,d=null,h=u;return n||(n=1/0),i.defer=function(){return d||(c.push(arguments),++s,l()),i},i.await=function(n){return h=n,f=!1,s||o(),i},i.awaitAll=function(n){return h=n,f=!0,s||o(),i},i}function u(){}"undefined"==typeof module?self.queue=n:module.exports=n,n.version="1.0.3";var t=[].slice})();